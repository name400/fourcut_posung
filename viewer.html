<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>네컷 저장</title>
<style>
  :root{--bg:#0b0c10;--card:#151823;--text:#e9eef6}
  html,body{margin:0;height:100%;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial}
  .wrap{display:flex;flex-direction:column;gap:12px;align-items:center;justify-content:center;min-height:100dvh;padding:20px}
  .card{background:var(--card);border:1px solid #1f2330;border-radius:16px;padding:16px}
  img{max-width:min(92vw,520px);height:auto;border-radius:16px;display:block}
  .btn{border:0;border-radius:12px;padding:12px 16px;font-weight:700;cursor:pointer;background:#4c82ff;color:#fff}
</style>
</head>
<body>
<div class="wrap">
  <h2>네컷 저장</h2>
  <div class="card"><img id="img" alt="fourcut"></div>
  <button class="btn" id="btn">이미지 저장</button>
</div>
<script>
  function getHashParam(name){
    try{
      const hash = location.hash.slice(1);
      const params = new URLSearchParams(hash);
      return params.get(name);
    }catch{ return null; }
  }
  const enc = getHashParam('img');
  if(enc){
    try{
      const dataUrl = LZString.decompressFromEncodedURIComponent(enc);
      document.getElementById('img').src = dataUrl;
    }catch(e){ alert('이미지 디코딩 실패'); }
  }else{
    document.body.innerHTML = '<div class="wrap"><p>이미지가 없습니다.</p></div>';
  }
  document.getElementById('btn').onclick = ()=>{
    const a = document.createElement('a');
    a.href = document.getElementById('img').src;
    a.download = 'fourcut.jpg';
    a.click();
  };
</script>
<script src="https://cdn.jsdelivr.net/npm/lz-string@1.5.0/libs/lz-string.min.js"></script>
</body>
</html>
